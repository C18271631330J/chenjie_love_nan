<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0,user-scalable=no,minimal-ui">
    <title>夏秋-维宁</title>
    <script src="https://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
    <style>
        *{
            margin: 0;
            padding:0;
        }
        .textcontent{
            color: #ffffff;
            width:100%;
            height: auto;
            font-size: 50px;
            text-align: center;
        }
        p {
            font-size: 40px;
            text-align: center;
        }
        p span {
            color: #fff;
            font-size: 30px;
        }
        p span.time {
            color: #5baaff;
        }
        /**/
        * {
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            background-image: linear-gradient(270deg, #8146b4, #6990f6);
            font-size: 32px;
/*             background: #2C1C44; */
            font-family: sans-serif;
            color: #FFF;
            font-family: "Playfair Display", serif;
            /*margin: 50px;*/
            margin: 0;
            overflow: hidden;
        }
        #container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            perspective: 1500px;

        }
        #card {
            text-align: center;
            position: relative;
            display: block;
            max-width: 600px;
            width: 600px;
            height: 400px;
            background: #3F2860;
            overflow: hidden;
            box-shadow: 0 0 0.5em rgba(0,0,0,0.4);
            box-shadow: 0.25em 0.25em 0px 0px rgba(0, 0, 0, 0.3);

            transition: 0.6s;
            transform-style: preserve-3d;
            overflow: visible;
        }
        .text {
            position: absolute;
            top: 0;
            z-index: 5;
            width: 100%;
            height: 100%;
            color: #E49BD4;
            word-wrap: break-word;
        }
        p {
            font-weight: 400;
            font-size: 1em;
        }
        h1 {
            width: 100%;
            height: 100%;
            line-height: 350px;
            font-size: 6em;
            font-weight: 900;
            position: relative;
            margin: 0;
        }

        /* FOR HOVER
        ---------------------------------------*/
        .front, .back {
            background: #3F2860;
            width: 100%;
            height: 100%;
            display: block;
            top: 0;
            left: 0;
            position: absolute;
            backface-visibility: hidden;
            overflow: hidden;
        }
        .back {
            z-index:10;
            transform: rotateY(180deg);
        }
        /*
        #container:hover #card{
            transform: rotateY(-180deg);
        }
        */
        .back p {
            line-height: normal;
            position: relative;
            margin:0 5%;
            top: 50%;
            transform: translateY(-50%);
        }

        @media only screen and (max-width: 600px) {
            h1 { line-height: 175px;}
            #card {
                width: 300px;
                height: 400px;
            }

        }
        .firework-grp {
            display: block;
            width: 100%;
            height: 100%;
            position: absolute;
            color: white;
            color: #535396;
        }
        .firework-grp2{
            transform: rotate(180deg);
            color: #2C1C44;
            z-index: 6;
        }
        .firework-grp3{
            transform: rotate(-75deg);
            color: #E339BD;
            z-index: 7;
        }
        .firework {
            font-size: 10px;
            display: block;
            width: 8.5em;
            height: 8.5em;
            position: absolute;
        }

        /* SIZES
        ------------------------------------*/
        .size05 {
            transform: scale(0.5);
        }
        .size08 {
            transform: scale(0.8);
        }
        .size13 {
            transform: scale(1.3);
        }
        .size15 {
            transform: scale(1.5);
        }
        .size18 {
            transform: scale(1.8);
        }
        .size20 {
            transform: scale(2);
        }

        /* POSITION
        ------------------------------------*/
        .pos1 {
            left: 56%;
            top: 65%;
        }
        .pos2 {
            left: 25%;
            top: 15%;
        }
        .pos3 {
            left: 50%;
            top: 25%;
        }
        .pos4 {
            left: -5%;
            top: 50%;
        }
        .pos5 {
            left: 90%;
            top: 65%;
        }
        .pos6 {
            left: 35%;
            top: 75%;
        }
        .pos7 {
            left: 5%;
            top: -5%;
        }
        .pos8 {
            left: 75%;
            top: 20%;
        }



        /* FIREWORK
        ------------------------------------*/
        .drops-grp {
            display: block;
            width: 8.5em;
            height: 8.5em;
            position: absolute;
        }
        .drops-grp2 {
            display: block;
            width: 8.5em;
            height: 8.5em;
            position: absolute;
            transform: rotate(45deg);
        }
        .drop {
            display: block;
            width: 1em;
            height: 2em;
            overflow: hidden;
            position: absolute;
            opacity: 0;
        }
        .drop:before {
            content: "";
            display: block;
            width: 1em;
            height: 1em;
            background: currentColor;
            border-radius: 50%;
        }
        .drop:after {
            content: "";
            display: block;
            position: relative;
            top: -0.4em;
            width: 0;
            height: 0;
            border-top: 1.4em solid currentColor;
            border-left: 0.5em solid transparent;
            border-right: 0.5em solid transparent;
        }
        .drop-1 {
            left:3.75em;
            top: 0;
            animation: drop1anim 1s ease-in-out infinite;
        }
        .drop-2 {
            top: 3.25em;
            right: 0;
            animation: drop2anim 1s ease-in-out infinite;
        }
        .drop-3 {
            left:3.75em;
            bottom: 0;
            animation: drop3anim 1s ease-in-out infinite;
        }
        .drop-4 {
            top: 3.25em;
            left: 0;
            animation: drop4anim 1s ease-in-out infinite;
        }
        .firework-2 .drop-1 {
            animation-delay: 0.5s
        }
        .firework-2 .drop-2 {
            animation-delay: 0.5s
        }
        .firework-2 .drop-3 {
            animation-delay: 0.5s
        }
        .firework-2 .drop-4 {
            animation-delay: 0.5s
        }

        /* FIREWORK DELAY
        ------------------------------------*/
        .delay1 .drop-1 {
            animation-delay: 0.25s
        }
        .delay1 .drop-2 {
            animation-delay: 0.25s
        }
        .delay1 .drop-3 {
            animation-delay: 0.25s
        }
        .delay1 .drop-4 {
            animation-delay: 0.25s
        }

        .delay2 .drop-1 {
            animation-delay: 0.75s
        }
        .delay2 .drop-2 {
            animation-delay: 0.75s
        }
        .delay2 .drop-3 {
            animation-delay: 0.75s
        }
        .delay2 .drop-4 {
            animation-delay: 0.75s
        }

        /* keyframes
        ------------------------------------*/
        @keyframes drop1anim {
            0% {
                top:3.25em;
                opacity: 0;
                transform: scale(0.3);
            }
            25% {
                opacity: 0;
            }
            50% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                top: -0.75em;
                opacity: 0;
                transform: scale(0.3);
            }
        }
        @keyframes drop2anim {
            0% {
                right:3.75em;
                opacity: 0;
                transform: scale(0.3) rotate(90deg);
            }
            25% {
                opacity: 0;
            }
            50% {
                opacity: 1;
                transform: scale(1) rotate(90deg);
            }
            100% {
                right: -0.25em;
                opacity: 0;
                transform: scale(0.3) rotate(90deg);
            }
        }
        @keyframes drop3anim {
            0% {
                bottom:3.25em;
                opacity: 0;
                transform: scale(0.3) rotate(180deg);
            }
            25% {
                opacity: 0;
            }
            50% {
                opacity: 1;
                transform: scale(1) rotate(180deg);
            }
            100% {
                bottom: -0.75em;
                opacity: 0;
                transform: scale(0.3) rotate(180deg);
            }
        }
        @keyframes drop4anim {
            0% {
                left:3.75em;
                opacity: 0;
                transform: scale(0.3) rotate(-90deg);
            }
            25% {
                opacity: 0;
            }
            50% {
                opacity: 1;
                transform: scale(1) rotate(-90deg);
            }
            100% {
                left: -0.25em;
                opacity: 0;
                transform: scale(0.3) rotate(-90deg);
            }
        }
        #aa {
            height:auto;
            /*width:520px;*/
            width:100%;
            text-align: center;
            font-size:14px;
            margin:auto;
        }

        /*枫叶*/
        svg {
            display: block;
            width: 100%;
            height: 100%;
        }

        #storage {
            position: absolute;
            left: -100%;
            top: -100%;
        }

        #leafTemplate .stem {
            fill: currentColor;
        }

        .light-red {
            fill: #e57373;
            color: #d93232;
        }

        .red {
            fill: #f44336;
            color: #d2190b;
        }

        .dark-red {
            fill: #d32f2f;
            color: #962020;
        }

        .light-orange {
            fill: #ffb74d;
            color: #ff9801;
        }

        .orange {
            fill: #ff9800;
            color: #b36a00;
        }

        .dark-orange {
            fill: #f57c00;
            color: #a95500;
        }

        .light-yellow {
            fill: #fff176;
            color: #ffe92a;
        }

        .yellow {
            fill: #ffeb3b;
            color: #eed500;
        }

        .dark-yellow {
            fill: #fbc02d;
            color: #d79b04;
        }

        .light-green {
            fill: #81c784;
            color: #4dae52;
        }

        .green {
            fill: #4caf50;
            color: #357a38;
        }

        .dark-green {
            fill: #388e3c;
            color: #225725;
        }

        .light-purple {
            fill: #ba68c8;
            color: #973da7;
        }

        .purple {
            fill: #9c27b0;
            color: #641971;
        }

        .dark-purple {
            fill: #7b1fa2;
            color: #4a1362;
        }
        /**/
    </style>
</head>
<body>
<div class="textcontent">
    <p><span></span></p>
    <p id="aa"></p>
    <div style="display:none" id="w">
      维宁,聂YY,短暂的夏秋过去了,毕业之后非常荣幸能在公司遇到这么漂亮,性格开朗而又不失有趣灵魂的你,记得第一次见到你的时候, 你的一个举动(手里拿着一只没有生命了的蚊子),给我看的时候,填满了我在敲代码时的寂寞与孤独,这事你可能忘了,哈哈哈。每天最开心的事就是和你一起吃中午饭,和你一起聊天感觉什么烦恼都烟消云散了,每当你离开公司(去北京那一次),我是多么舍不得你走,因为你走了,我必然会没了欢笑与乐趣,瞬时我的内心在想何时再见到你,你去北京的那一周,我的内心是孤独的，非常担心你,怕你在那边不习惯,每天上班打开手机的那一刻,总想着发个消息给你,问问你的情况,但我又告诉自己还是等你有时间了再发,很开心的是一周之后你说你要回来了, 我开心得睡不着觉,你终于要回来了,终于能和你一起吃饭了,你工作的是时候很认真，私下里又非常有趣,记得第一次收到你那滑稽的两个图(我现在还收藏着),内心欣喜若狂,还有一个表情包是“别害怕，我确实是流氓.jpg”,还记得吧,我回了句:我喜欢你这只流氓,没想到你又回了个“你根本就不爱我,你只是看上了我的表情包.jpg”,你知道这让我想到了什么？额，好了，由于字数限制，我不能往下写了，再往下写，可能会成为一本真实小说！字数溢出仿佛就是用言语已不足以表达我对你的喜欢~，捉住秋天的尾巴,我本来打算送你个实在的礼物,但又怕你不喜欢,又怕送错，所以我开发了这个小小的程序,写个独白。你并不是什么地方都好，你只是什么地方都让我忘不了，我要感谢上天给我与你相遇的幸运，心有真心，让我们一起走进向往中的生活。最后祝愿你学业顺利，开开心心， 花开了，我就画花。 花谢了，我就画我自己。 你来了，我当然画你。 你走了，我就画一画回忆。愿我如星“伊”如月，夜夜流光相皎洁~
                                                                                                                    ----------喜欢你的阿海
    </div>
</div>

<div class="firework-grp firework-grp2">
    <div class="firework size05 pos1 ">
        <div class="drops-grp">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
        <div class="drops-grp drops-grp2">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
    </div>
    <div class="firework size08 pos2 delay1">
        <div class="drops-grp">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
        <div class="drops-grp drops-grp2">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
    </div>
    <div class="firework pos3 delay2">
        <div class="drops-grp">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
        <div class="drops-grp drops-grp2">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
    </div>
    <div class="firework size15 pos4 ">
        <div class="drops-grp">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
        <div class="drops-grp drops-grp2">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
    </div>
    <div class="firework size18 pos5 delay1">
        <div class="drops-grp">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
        <div class="drops-grp drops-grp2">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
    </div>
    <div class="firework size20 pos6 delay2">
        <div class="drops-grp">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
        <div class="drops-grp drops-grp2">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
    </div>
    <div class="firework size13 pos7">
        <div class="drops-grp">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
        <div class="drops-grp drops-grp2">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
    </div>
    <div class="firework size05 pos8">
        <div class="drops-grp">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
        <div class="drops-grp drops-grp2">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
    </div>
</div>
<div class="firework-grp firework-grp3">
    <div class="firework size05 pos1 ">
        <div class="drops-grp">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
        <div class="drops-grp drops-grp2">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
    </div>
    <div class="firework size08 pos2 delay1">
        <div class="drops-grp">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
        <div class="drops-grp drops-grp2">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
    </div>
    <div class="firework pos3 delay2">
        <div class="drops-grp">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
        <div class="drops-grp drops-grp2">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
    </div>
    <div class="firework size15 pos4 ">
        <div class="drops-grp">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
        <div class="drops-grp drops-grp2">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
    </div>
    <div class="firework size18 pos5 delay1">
        <div class="drops-grp">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
        <div class="drops-grp drops-grp2">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
    </div>
    <div class="firework size20 pos6 delay2">
        <div class="drops-grp">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
        <div class="drops-grp drops-grp2">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
    </div>
    <div class="firework size13 pos7">
        <div class="drops-grp">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
        <div class="drops-grp drops-grp2">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
    </div>
    <div class="firework size05 pos8">
        <div class="drops-grp">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
        <div class="drops-grp drops-grp2">
            <span class="drop drop-1"></span>
            <span class="drop drop-2"></span>
            <span class="drop drop-3"></span>
            <span class="drop drop-4"></span>
        </div>
    </div>
</div>
<!---->
<script>
    var oSpan = document.getElementsByTagName('span')[0];
    function time(n) {
        return n >= 0 && n < 10 ? '0' + n : '' + n;
    }
    function getDate() {
        var oDate = new Date();
        var oldTime = oDate.getTime();//现在距离1970年的毫秒数
        var newDate = new Date('2019/5/28 00:00:00').getTime();
        var second = Math.floor((oldTime - newDate) / 1000);//现在时间距离之前某个时间的秒数
        var day = Math.floor(second / 86400);//整数部分代表的是天；一天有24*60*60=86400秒 ；
        second = second % 86400;//余数代表剩下的秒数；
        var hour = Math.floor(second / 3600);//整数部分代表小时；
        second %= 3600; //余数代表 剩下的秒数；
        var minute = Math.floor(second / 60);
        second %= 60;
        var str = '<span class="time">维宁,喜欢你已经有</span>'+time(day) + '<span class="time">天</span>'
            + time(hour) + '<span class="time">小时</span>'
            + time(minute) + '<span class="time">分钟</span>'
            + time(second) + '<span class="time">秒了</span>';
        oSpan.innerHTML = str;
    }
    getDate();
    setInterval(getDate, 1000);
    //打字
    var index = 0;
    var word = document.getElementById("w").innerHTML;
    console.log(word)

    function type() {
        document.getElementById("aa").innerText = word.substring(0, index++);
    }
    setInterval(type, 200);
// 枫叶js//////////////////
    let $mm = Object.assign((s, attrs) => {
        if (s === null) { return null }
        let el
        if (s instanceof Element || s instanceof HTMLDocument || s instanceof Window) {
            el = s
        } else {
            let match = s.match(/<\/?(.*?)>/)
            el = match ? $mm.create(match[1], attrs) : $mm.find(s)
        }
        if (el === null) { return null }
        $mm.merge(el, $mm.fn)
        Object.defineProperty(el, 'val', {
            configurable: true,
            get: () => el.value,
            set: v => { el.value = v }
        })
        Object.defineProperty(el, 'parent', {
            configurable: true,
            get: () => $mm(el.parentElement)
        })
        Object.defineProperty(el, 'next', {
            configurable: true,
            get: () => $mm(el.nextElementSibling),
            set: v => el.appendAfter(v)
        })
        Object.defineProperty(el, 'prev', {
            configurable: true,
            get: () => $mm(el.previousElementSibling),
            set: v => el.appendBefore(v)
        })
        Object.defineProperty(el, 'bounds', {
            configurable: true,
            get: () => el.getBoundingClientRect()
        })
        Object.defineProperty(el, 'text', {
            configurable: true,
            get: () => el.textContent,
            set: v => { el.textContent = v }
        })
        Object.defineProperty(el, 'html', {
            configurable: true,
            get: () => el.innerHTML,
            set: v => { el.innerHTML = v }
        })
        return el
    }, {
        find: s => $mm(document.querySelector(s)),
        findAll: s => [...document.querySelectorAll(s)].map(e => $mm(e)),
        create: (elName, attrs) => {
            let el = document.createElement(elName)

            if (attrs !== undefined) {
                let keys = Object.keys(attrs)
                let styleKey = keys.find(k => k.toLowerCase() === 'style' && $mm.isObj(attrs[k]))
                let innerHtmlKey = keys.find(k => k.toLowerCase() === 'innerhtml' || k.toLowerCase() === 'html')
                if (styleKey !== undefined) {
                    for (let k in attrs[styleKey]) {
                        el.style[k] = attrs[styleKey][k]
                    }
                    delete attrs[styleKey]
                }
                if (innerHtmlKey !== undefined) {
                    el.innerHTML = attrs[innerHtmlKey]
                    delete attrs[innerHtmlKey]
                }

                for (let k in attrs) {
                    el.setAttribute(k, attrs[k])
                }
            }

            return $mm(el)
        },
        createSvg: (elName, attrs) => {
            let el = document.createElementNS('http://www.w3.org/2000/svg', elName)

            if (attrs !== undefined) {
                let keys = Object.keys(attrs)
                let styleKey = keys.find(k => k.toLowerCase() === 'style' && $mm.isObj(attrs[k]))
                let innerHtmlKey = keys.find(k => k.toLowerCase() === 'innerhtml' || k.toLowerCase() === 'html')
                if (styleKey !== undefined) {
                    for (let k in attrs[styleKey]) {
                        el.style[k] = attrs[styleKey][k]
                    }
                    delete attrs[styleKey]
                }
                if (innerHtmlKey !== undefined) {
                    el.innerHTML = attrs[innerHtmlKey]
                    delete attrs[innerHtmlKey]
                }

                for (let k in attrs) { el.setAttribute(k, attrs[k]) }
            }

            return $mm(el)
        },
        rand: (max = 1, min = 0) => Math.random() * (max - min) + min,
        randInt: (max, min = 0) => ~~(Math.random() * (max - min) + min),
        randArr: arr => arr[$mm.randInt(arr.length)],
        isObj: obj => typeof obj === 'object' && obj.constructor !== RegExp && obj.constructor !== Date,
        merge: (deep, ...objs) => {
            if (deep !== true) { return Object.assign(deep, ...objs) }

            return objs.reduce((dest, src) => {
                if (Array.isArray(src)) {
                    return Array.isArray(dest) ? dest.concat(src) : src
                }

                Object.keys(src).forEach(k => {
                    if (src[k] && $mm.isObj(src[k])) {
                        $mm.merge(true, dest[k], src[k])
                    } else {
                        dest[k] = src[k]
                    }
                })
                return dest
            })
        },
        extend: (...objs) => {
            return $mm.merge($mm, ...objs)
        },
        round: (num, prec = 2) => {
            let x = 10 ** prec
            return Math.round(num * x) / x
        },
        dist: (p1, p2) => Math.hypot(p1.x - p2.x, p1.y - p2.y),
        cssVar: (v, val) => {
            if (val === undefined) {
                return window.getComputedStyle(document.body).getPropertyValue(`--${v}`).trim()
            }
            document.documentElement.style.setProperty(`--${v}`, val)
        },
        array: (n, fn) => Array.from({length: n}, fn),
        fn: {
            find: function (s) { return $mm(this.querySelector(s)) },
            findAll: function (s) { return [...this.querySelectorAll(s)].map(e => $mm(e)) },
            on: function (type, ...args) {
                for (let t of type.split(' ')) {
                    this.addEventListener(t, ...args)
                }
                return this
            },
            appendBefore: function (el) {
                this.parent.insertBefore(el, this)
                return this
            },
            appendAfter: function (el) {
                this.parent.insertBefore(el, this.nextSibling)
                return this
            },
            appendTo: function (el) {
                el.append(this)
                return this
            },
            addClass: function (c) {
                this.classList.add(c)
                return this
            },
            removeClass: function (c) {
                this.classList.remove(c)
                return this
            },
            toggleClass: function (c) {
                this.classList.toggle(c)
                return this
            },
            hasClass: function (c) {
                return this.classList.contains(c)
            },
            attr: function (a, val) {
                if (val === undefined) {
                    return this.getAttribute(a)
                }
                this.setAttribute(a, val)
                return this
            },
            data: function (a, val) {
                if (val === undefined) {
                    return this.getAttribute(`data-${a}`)
                }
                this.setAttribute(`data-${a}`, val)
                return this
            },
            getStyle: function (...attrs) {
                let style = window.getComputedStyle(this)

                let ret = {}
                if (attrs.length > 1) {
                    for (let a of attrs) {
                        ret[a] = style.getPropertyValue(a)
                    }
                } else if (attrs.length === 1) {
                    ret = style.getPropertyValue(attrs[0])
                } else {
                    for (let a in style) {
                        ret[a] = style.getPropertyValue(a)
                    }
                }

                return ret
            },
            serialize: function () {
                let obj = {}
                this.findAll('input, select, textarea').forEach(field => {
                    switch (field.type) {
                        case 'checkbox':
                            obj[field.name] = field.checked
                            break
                        case 'radio':
                            if (field.checked) {
                                obj[field.name] = field.value
                            } else if (!(field.name in obj)) {
                                obj[field.name] = null
                            }
                            break
                        default:
                            obj[field.name] = field.value
                    }
                })
                return obj
            },
            validate: function () {
                let fields = this.findAll('[data-required]')
                let obj = {}
                fields.forEach(field => {
                    switch (field.type) {
                        case 'checkbox':
                            break
                        case 'radio':
                            if (field.checked) {
                                obj[field.name] = true
                            } else if (!(field.name in obj)) {
                                obj[field.name] = false
                            }
                            break
                        default:
                            obj[field.name] = field.value.length && field.validity.valid
                    }
                })
                let valid = Object.values(obj).every(e => e)

                if (!valid) {
                    fields.forEach(field => field.attr('required', ''))
                }

                return $mm.merge({valid: valid}, obj)
            },
            extend: (...objs) => {
                return $mm.merge($mm.fn, ...objs)
            }
        }
    })

    const body = $mm('body')

    const fragment = document.createDocumentFragment()

    const root = $mm.createSvg('svg', {
        viewBox: `0 0 ${window.innerWidth} ${window.innerHeight}`
    })
    fragment.append(root)

    window.addEventListener('resize', () => root.attr('viewBox', `0 0 ${window.innerWidth} ${window.innerHeight}`))

    let side = [-60,0]
    let cBot = [side[0],70]
    let cTop = [side[0],-40]
    let d = `M0,100 Q${cBot} ${side} Q${cTop} 0,-100 Q${-cTop[0]},${cTop[1]} ${-side[0]},${side[1]} Q${-cBot[0]},${cBot[1]} 0,100`

    function createLeaf () {
        let leaf = $mm.createSvg('g')

        leaf.append($mm.createSvg('path', {
            style: {
                transform: 'translate(0, 100px) rotate(-70deg)'
            },
            d: d
        }))

        leaf.append($mm.createSvg('path', {
            style: {
                transform: 'translate(100px, 100px) rotate(60deg)'
            },
            d: d
        }))

        leaf.append($mm.createSvg('path', {
            style: {
                transform: 'translate(0, 50px) rotate(-40deg)'
            },
            d: d
        }))

        leaf.append($mm.createSvg('path', {
            style: {
                transform: 'translate(100px, 50px) rotate(20deg)'
            },
            d: d
        }))

        leaf.append($mm.createSvg('path', {
            style: {
                transform: 'translate(50px, 0) rotate(0deg)'
            },
            d: d
        }))

        let stem = $mm.createSvg('g', { class: 'stem' })
        leaf.append(stem)

        stem.append($mm.createSvg('path', {
            style: {
                transform: 'translate(45px, 100px) rotate(5deg)'
            },
            d: 'M0,100 L0,-100 C20,-80 10,80 0,100'
        }))

        stem.append($mm.createSvg('path', {
            style: {
                transform: 'translate(85px, 40px) rotate(40deg) scale(.5)'
            },
            d: 'M0,100 L0,-100 C20,-80 10,80 0,100'
        }))

        stem.append($mm.createSvg('path', {
            style: {
                transform: 'translate(5px, 110px) rotate(-70deg) scale(.5)'
            },
            d: 'M0,100 L0,-100 C20,-80 10,80 0,100'
        }))

        return leaf
    }

    const storage = $mm.createSvg('svg', { id: 'storage' })
    fragment.append(storage)

    let leafTemplate = createLeaf()
    leafTemplate.id = 'leafTemplate'

    storage.append(leafTemplate)

    let colors = [
        'light-red', 'light-orange', 'light-yellow', 'light-green', 'light-purple',
        'red', 'orange', 'yellow', 'green', 'purple',
        'dark-red', 'dark-orange', 'dark-yellow', 'dark-green', 'dark-purple'
    ]

    /*
    for (let i = 3; i--;) {
      for (let j = 5; j--;) {
        let newLeaf = $mm(leafTemplate.cloneNode(true))
        newLeaf.style.transform = `translate(${j*150+100}px, ${i*200+150}px)`
        console.log(colors)
        newLeaf.addClass($mm.randArr(colors))
        root.append(newLeaf)
      }
    }
    */

    let leaves = []

    for (let i = 50; i--;) {
        let speed = $mm.rand(.75, .15)
        let x = $mm.randInt(window.innerWidth)
        let y = -100 - $mm.randInt(300)
        let angle = $mm.randInt(360)
        let newLeaf = $mm.createSvg('use', {
            href: '#leafTemplate',
            class: $mm.randArr(colors),
            style: {
                transform: `translate(${x}px, ${y}px) rotate(${angle}deg) scale(${$mm.rand(.25, .125)})`,
                'transition-timing-function': 'linear',
                'transition-duration': `${(window.innerHeight - y)/speed*10}ms`
            }
        })
        leaves.push(newLeaf)
        root.append(newLeaf)

        setTimeout(() => {
            newLeaf.style.transform = newLeaf.style.transform.replace(/translate\((.*?),.*?\) rotate\(.*?\)/, `translate(${x + $mm.randInt((window.innerHeight - y)/50, -(window.innerHeight - y)/50)}px, ${window.innerHeight + 100}px) rotate(${angle + $mm.randInt((window.innerHeight - y)/5)}deg)`)

            newLeaf.on('transitionend', resetLeaf)
        }, 10)

        function resetLeaf () {
            newLeaf.removeEventListener('transitionend', resetLeaf)

            newLeaf.style['transition-duration'] = '0ms'

            setTimeout(() => {
                let x = $mm.randInt(window.innerWidth)
                let y = -100 - $mm.randInt(300)
                let speed = $mm.rand(.75, .15)
                let angle = $mm.randInt(360)
                newLeaf.style.transform = `translate(${x}px, ${y}px) rotate(${angle}deg) scale(${$mm.rand(.25, .125)})`

                setTimeout(() => {
                    newLeaf.style['transition-duration'] = `${(window.innerHeight - y)/speed*10}ms`

                    setTimeout(() => {
                        newLeaf.style.transform = newLeaf.style.transform.replace(/translate\((.*?),.*?\) rotate\(.*?\)/, `translate(${x + $mm.randInt(window.innerHeight/50, -window.innerHeight/50)}px, ${window.innerHeight + 100}px) rotate(${angle + $mm.randInt((window.innerHeight - y)/5)}deg)`)

                        newLeaf.on('transitionend', resetLeaf)
                    }, 100)
                }, 100)
            }, 100)
        }
    }
    $mm('body').append(fragment)
</script>
</body>
</html>
